<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JBãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ - ãã‚ã—ãè¦‹ç©ã‚‚ã‚Š</title>
  <style>
    /* å…¨ä½“ã®è¨­å®š */
    body {
      font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'ãƒ¡ã‚¤ãƒªã‚ª', sans-serif;
      background-color: #f9f9f9;
      color: #333;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    .header {
      text-align: center;
      margin-bottom: 20px;
      width: 100%;
      max-width: 500px;
    }
    .logo {
      font-size: 32px;
      font-weight: bold;
      color: #0068e9;
      margin-bottom: 5px;
    }
    h1 {
      background-color: #0068e9;
      color: #fff;
      font-size: 24px;
      text-align: center;
      padding: 12px 20px;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      margin: 0 0 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .card {
      background-color: #fff;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
      max-width: 500px;
      width: 100%;
      margin-bottom: 20px;
      box-sizing: border-box;
      border: 1px solid #eaeaea;
      animation: fadeIn 0.5s ease-out forwards;
    }
    .section-title {
      font-size: 18px;
      color: #0068e9;
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid #ffc600;
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
      color: #333;
    }
    input[type="date"],
    input[type="number"],
    select {
      width: 100%;
      padding: 12px;
      margin-bottom: 8px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      box-sizing: border-box;
      background-color: #f9f9f9;
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    input[type="date"]:focus,
    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: #0068e9;
      box-shadow: 0 0 0 3px rgba(0, 104, 233, 0.2);
    }
    button {
      width: 100%;
      padding: 14px;
      background-color: #0068e9;
      color: #fff;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      margin-top: 10px;
      box-shadow: 0 4px 8px rgba(0, 104, 233, 0.3);
    }
    button:hover {
      background-color: #0051b5;
      transform: translateY(-2px);
    }
    button:active {
      transform: translateY(0);
    }
    .inquiry-link {
      text-align: center;
      margin-top: 20px;
    }
    .button-link {
      display: inline-block;
      padding: 14px 20px;
      background-color: #ffc600;
      color: #333;
      text-decoration: none;
      font-size: 16px;
      font-weight: bold;
      border-radius: 8px;
      transition: background-color 0.3s, transform 0.2s;
      box-shadow: 0 4px 8px rgba(255, 198, 0, 0.3);
    }
    .button-link:hover {
      background-color: #ffb400;
      transform: translateY(-2px);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">JBãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼</div>
  </div>

  <h1>ğŸš— ãã‚ã—ãè¦‹ç©ã‚‚ã‚Š</h1>

  <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
  <div class="card">
    <form id="rentalForm" onsubmit="event.preventDefault(); calculateAndShowResult();">
      <div class="section-title">åŸºæœ¬æƒ…å ±</div>
      <div class="form-group">
        <label for="startDate">ã”åˆ©ç”¨é–‹å§‹æ—¥ <span style="color: #0068e9;">*</span></label>
        <input type="date" id="startDate" required>
        <div id="startDateError" class="error-message" style="color: red; display: none;">åˆ©ç”¨é–‹å§‹æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
      </div>
      <div class="form-group">
        <label for="days">ã”åˆ©ç”¨æ—¥æ•° <span style="color: #0068e9;">*</span></label>
        <input type="number" id="days" min="1" max="365" value="7" step="1">
        <div id="daysError" class="error-message" style="color: red; display: none;">åˆ©ç”¨æ—¥æ•°ã¯1æ—¥ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
      </div>
      <div class="form-group">
        <label for="carClass">è»Šä¸¡ã‚¯ãƒ©ã‚¹ <span style="color: #0068e9;">*</span></label>
        <select id="carClass" required onchange="updateCarImage()">
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="J-1">J-1ï¼šè»½è‡ªå‹•è»Šï¼ˆ2ãƒ‰ã‚¢ï¼‰</option>
          <option value="J-2">J-2ï¼šè»½è‡ªå‹•è»Šï¼ˆ4ãƒ‰ã‚¢ï¼‰</option>
          <option value="J-3">J-3ï¼šè»½è²¨ç‰©ãƒãƒ³</option>
          <option value="J-4">J-4ï¼šå°å‹ä¹—ç”¨è»Š</option>
        </select>
        <div id="carClassError" class="error-message" style="color: red; display: none;">è»Šä¸¡ã‚¯ãƒ©ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
      </div>
      <!-- ã“ã“ã«è»Šä¸¡ç”»åƒè¡¨ç¤ºé ˜åŸŸç­‰ãŒã‚ã‚Œã°è¿½åŠ  -->
      <div class="section-title">ã‚ªãƒ—ã‚·ãƒ§ãƒ³</div>
      <div class="form-group">
        <input type="checkbox" id="insurance">
        <label for="insurance">è»Šä¸¡ä¿é™º</label>
      </div>
      <div class="form-group">
        <input type="checkbox" id="waiver">
        <label for="waiver">å…è²¬è£œå„Ÿ</label>
      </div>
      <div class="form-group">
        <input type="checkbox" id="tires">
        <label for="tires">ã‚¹ã‚¿ãƒƒãƒ‰ãƒ¬ã‚¹ã‚¿ã‚¤ãƒ¤</label>
      </div>
      <div class="form-group">
        <input type="checkbox" id="etc">
        <label for="etc">ETC</label>
      </div>
      <div class="form-group">
        <input type="checkbox" id="gps">
        <label for="gps">ã‚«ãƒ¼ãƒŠãƒ“</label>
      </div>
      <button type="submit">è¦‹ç©ã‚‚ã‚Šã‚’è¨ˆç®—ã™ã‚‹</button>
    </form>
  </div>

  <!-- ãŠè¦‹ç©ã‚‚ã‚Šçµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
  <div id="result" class="card" style="display: none;">
    <div class="section-title">ãŠè¦‹ç©ã‚‚ã‚Šçµæœ</div>
    <div id="resultContent"></div>
    <div class="inquiry-link">
      <!-- å•ã„åˆã‚ã›ãƒªãƒ³ã‚¯ã® href ã¯ JS ã§å‹•çš„ã«ä¸Šæ›¸ã -->
      <a href="https://jb-rentacar.com/miyagi/#contact" target="_blank" class="button-link">ç©ºãçŠ¶æ³ã‚’ç¢ºèªã™ã‚‹ â¡</a>
    </div>
  </div>

  <script>
    // æ–™é‡‘è¡¨ã‚„è»Šä¸¡èª¬æ˜ï¼ˆä¾‹ï¼‰
    const rateTable = {
      "J-1": [1980, 3960, 5940, /* ... */],
      "J-2": [2480, 4960, 7440, /* ... */],
      "J-3": [3180, 6360, 9540, /* ... */],
      "J-4": [3380, 6760, 10140, /* ... */]
      // â€»è©³ç´°ã¯å®Ÿéš›ã®æ–™é‡‘è¡¨ã«åˆã‚ã›ã¦ãã ã•ã„
    };

    const carDescriptions = {
      "J-1": "è»½è‡ªå‹•è»Šï¼ˆ2ãƒ‰ã‚¢ï¼‰ - ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã§ä½¿ã„ã‚„ã™ã„è»Šä¸¡ã§ã™ã€‚",
      "J-2": "è»½è‡ªå‹•è»Šï¼ˆ4ãƒ‰ã‚¢ï¼‰ - ä¹—ã‚Šé™ã‚ŠãŒã—ã‚„ã™ãå®Ÿç”¨çš„ã§ã™ã€‚",
      "J-3": "è»½è²¨ç‰©ãƒãƒ³ - è·ç‰©ã®å¤šã„æ–¹ã«ãŠã™ã™ã‚ã§ã™ã€‚",
      "J-4": "å°å‹ä¹—ç”¨è»Š - å¿«é©ãªä¹—ã‚Šå¿ƒåœ°ã¨ååˆ†ãªè·å®¤ã‚¹ãƒšãƒ¼ã‚¹ã‚’æŒã¡ã¾ã™ã€‚"
    };

    // è»Šä¸¡ç”»åƒã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ç”»åƒãƒ‘ã‚¹ãªã©ã‚’èª¿æ•´ï¼‰
    function updateCarImage() {
      const carClass = document.getElementById("carClass").value;
      // ã“ã“ã§ç”»åƒè¡¨ç¤ºç­‰ã®å‡¦ç†ã‚’è¿½åŠ 
      // ä¾‹ï¼šdocument.getElementById("carImage").src = carClass.replace("-", "") + ".png";
    }

    // ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    function validateForm() {
      let valid = true;
      const startDate = document.getElementById("startDate").value;
      if (!startDate) {
        document.getElementById("startDateError").style.display = "block";
        valid = false;
      }
      const days = parseInt(document.getElementById("days").value);
      if (isNaN(days) || days < 1) {
        document.getElementById("daysError").style.display = "block";
        valid = false;
      }
      const carClass = document.getElementById("carClass").value;
      if (!carClass) {
        document.getElementById("carClassError").style.display = "block";
        valid = false;
      }
      return valid;
    }

    // è¦‹ç©ã‚‚ã‚Šè¨ˆç®—ã¨çµæœè¡¨ç¤º
    function calculateAndShowResult() {
      if (!validateForm()) { return; }
      
      // ã‚¹ãƒ†ãƒƒãƒ—ç­‰ãŒã‚ã‚Œã°æ›´æ–°ï¼ˆçœç•¥ï¼‰
      const startDate = document.getElementById("startDate").value;
      const days = parseInt(document.getElementById("days").value);
      const carClass = document.getElementById("carClass").value;
      const insurance = document.getElementById("insurance").checked;
      const waiver = document.getElementById("waiver").checked;
      const tires = document.getElementById("tires").checked;
      const etc = document.getElementById("etc").checked;
      const gps = document.getElementById("gps").checked;

      // ã“ã“ã§ã¯ç°¡å˜ãªä¾‹ã¨ã—ã¦åŸºæœ¬æ–™é‡‘ã ã‘è¨ˆç®—
      let totalBaseRate = 0;
      if (rateTable[carClass] && rateTable[carClass][Math.min(days - 1, rateTable[carClass].length - 1)]) {
        totalBaseRate = rateTable[carClass][Math.min(days - 1, rateTable[carClass].length - 1)];
      }
      
      // ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘ï¼ˆä¾‹ï¼‰
      let optionCost = 0;
      let optionsList = [];
      if (insurance) { optionCost += 1000; optionsList.push("è»Šä¸¡ä¿é™º"); }
      if (waiver) { optionCost += 1000; optionsList.push("å…è²¬è£œå„Ÿ"); }
      if (tires)   { optionCost += 1000; optionsList.push("ã‚¹ã‚¿ãƒƒãƒ‰ãƒ¬ã‚¹ã‚¿ã‚¤ãƒ¤"); }
      if (etc)     { optionCost += 500;  optionsList.push("ETC"); }
      if (gps)     { optionCost += 500;  optionsList.push("ã‚«ãƒ¼ãƒŠãƒ“"); }
      
      const subtotal = totalBaseRate + optionCost;
      const tax = Math.round(subtotal * 0.1);
      const total = subtotal + tax;
      
      // æ—¥ä»˜ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
      const startDateObj = new Date(startDate);
      const returnDateObj = new Date(startDate);
      returnDateObj.setDate(startDateObj.getDate() + days);
      const formatDate = date => {
        const y = date.getFullYear();
        const m = (date.getMonth() + 1).toString().padStart(2, '0');
        const d = date.getDate().toString().padStart(2, '0');
        const w = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'][date.getDay()];
        return `${y}å¹´${m}æœˆ${d}æ—¥(${w})`;
      };
      const formattedStartDate = formatDate(startDateObj);
      const formattedReturnDate = formatDate(returnDateObj);
      
      // çµæœè¡¨ç¤ºç”¨HTMLï¼ˆä¾‹ï¼‰
      const resultContent = document.getElementById("resultContent");
      resultContent.innerHTML = `
        <div>ã”åˆ©ç”¨é–‹å§‹æ—¥: <strong>${formattedStartDate}</strong></div>
        <div>ã”è¿”å´æ—¥: <strong>${formattedReturnDate}</strong></div>
        <div>ã”åˆ©ç”¨æ—¥æ•°: <strong>${days}æ—¥é–“</strong></div>
        <div>é¸æŠè»Šä¸¡: <strong>${document.getElementById("carClass").options[document.getElementById("carClass").selectedIndex].text}</strong></div>
        <div>åŸºæœ¬æ–™é‡‘: <strong>Â¥${totalBaseRate.toLocaleString()}</strong></div>
        <div>ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘: <strong>Â¥${optionCost.toLocaleString()}</strong></div>
        <div>å°è¨ˆ: <strong>Â¥${subtotal.toLocaleString()}</strong></div>
        <div>æ¶ˆè²»ç¨ (10%): <strong>Â¥${tax.toLocaleString()}</strong></div>
        <div>åˆè¨ˆé‡‘é¡: <strong>Â¥${total.toLocaleString()}</strong></div>
      `;
      
      // å•ã„åˆã‚ã›ãƒªãƒ³ã‚¯ã®URLã‚’å…¥åŠ›å†…å®¹ã‹ã‚‰çµ„ã¿ç«‹ã¦ã‚‹
      const inquiryLink = document.querySelector(".inquiry-link a");
      // é€ä¿¡å´ã‹ã‚‰æ¸¡ã™ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã‚­ãƒ¼åã¯å—ã‘æ‰‹å´ãƒ•ã‚©ãƒ¼ãƒ ã® name å±æ€§ã¨ä¸€è‡´ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹
      // å—ã‘æ‰‹å´ãƒ•ã‚©ãƒ¼ãƒ ã§ã¯ã€Œäºˆå®šå‡ºç™ºæ—¥ï¼ˆãƒ¬ãƒ³ã‚¿ãƒ«é–‹å§‹å¸Œæœ›æ—¥ï¼‰ã€, ã€Œäºˆå®šè»Šç¨®ãƒ©ãƒ³ã‚¯ã€, ã€Œãã®ä»–ã€
      const selectedCarText = document.getElementById("carClass").options[document.getElementById("carClass").selectedIndex].text;
      const optionString = optionsList.length > 0 ? "ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼š" + optionsList.join("ã€") + "å¸Œæœ›" : "";
      
      const params = new URLSearchParams({
        "äºˆå®šå‡ºç™ºæ—¥ï¼ˆãƒ¬ãƒ³ã‚¿ãƒ«é–‹å§‹å¸Œæœ›æ—¥ï¼‰": startDate,           // ã‚­ãƒ¼åã‚’å—ã‘æ‰‹å´ã¨åˆã‚ã›ã‚‹
        "äºˆå®šè»Šç¨®ãƒ©ãƒ³ã‚¯": selectedCarText,                       // ã‚­ãƒ¼åã¯ã€Œäºˆå®šè»Šç¨®ãƒ©ãƒ³ã‚¯ã€
        "ãã®ä»–": optionString                                    // ã‚­ãƒ¼åã¯ã€Œãã®ä»–ã€
      });
      
      // çµ„ã¿ç«‹ã¦ãŸã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä»˜ä¸ã—ã€#contact ã§ãƒ•ã‚©ãƒ¼ãƒ ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã›ã‚‹
      const newUrl = "https://jb-rentacar.com/miyagi/?" + params.toString() + "#contact";
      inquiryLink.href = newUrl;
      
      // çµæœã‚¨ãƒªã‚¢ã®è¡¨ç¤ºã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
      document.getElementById("result").style.display = "block";
      document.getElementById("result").scrollIntoView({ behavior: "smooth" });
    }

    // åˆæœŸè¨­å®šï¼šä»Šæ—¥ã®æ—¥ä»˜ã‚’è¨­å®š
    document.addEventListener("DOMContentLoaded", function() {
      const today = new Date();
      const formattedToday = today.toISOString().split("T")[0];
      document.getElementById("startDate").value = formattedToday;
      // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¯ãƒªã‚¢
      document.getElementById("startDate").addEventListener("input", function() {
        document.getElementById("startDateError").style.display = "none";
      });
      document.getElementById("days").addEventListener("input", function() {
        document.getElementById("daysError").style.display = "none";
      });
      document.getElementById("carClass").addEventListener("change", function() {
        document.getElementById("carClassError").style.display = "none";
      });
    });
  </script>
</body>
</html>
